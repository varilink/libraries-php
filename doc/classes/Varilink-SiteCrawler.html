<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Varilink PHP Library Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="../">
    <link rel="icon" href="images/favicon.ico"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/base.css">
            <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/template.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism-okaidia.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.css">
                <script src="https://cdn.jsdelivr.net/npm/fuse.js@3.4.6"></script>
        <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
        <script src="js/search.js"></script>
        <script defer src="js/searchIndex.js"></script>
    </head>
<body id="top">
    <header class="phpdocumentor-header phpdocumentor-section">
    <h1 class="phpdocumentor-title"><a href="" class="phpdocumentor-title__link">Varilink PHP Library Documentation</a></h1>
    <input class="phpdocumentor-header__menu-button" type="checkbox" id="menu-button" name="menu-button" />
    <label class="phpdocumentor-header__menu-icon" for="menu-button">
        <i class="fas fa-bars"></i>
    </label>
    <section data-search-form class="phpdocumentor-search">
    <label>
        <span class="visually-hidden">Search for</span>
        <svg class="phpdocumentor-search__icon" width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="7.5" cy="7.5" r="6.5" stroke="currentColor" stroke-width="2"/>
            <line x1="12.4892" y1="12.2727" x2="19.1559" y2="18.9393" stroke="currentColor" stroke-width="3"/>
        </svg>
        <input type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading .." disabled />
    </label>
</section>

    <nav class="phpdocumentor-topnav">
    <ul class="phpdocumentor-topnav__menu">
        </ul>
</nav>
</header>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <input class="phpdocumentor-sidebar__menu-button" type="checkbox" id="sidebar-button" name="sidebar-button" />
<label class="phpdocumentor-sidebar__menu-icon" for="sidebar-button">
    Menu
</label>
<aside class="phpdocumentor-column -four phpdocumentor-sidebar">
        
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                                <h4 class="phpdocumentor-sidebar__root-namespace"><a href="namespaces/varilink.html"><abbr title="\Varilink">Varilink</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="namespaces/varilink-sitecrawler.html"><abbr title="\Varilink\SiteCrawler">SiteCrawler</abbr></a></li>
                                    </ul>
                        </section>

    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="indices/files.html">Files</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
            <li class="phpdocumentor-breadcrumb"><a href="namespaces/varilink.html">Varilink</a></li>
    </ul>

    <article class="phpdocumentor-element -class">
        <h2 class="phpdocumentor-content__title">
    SiteCrawler

    
    
    
    </h2>

        <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">20</span>
</aside>

            <p class="phpdocumentor-summary">Crawls websites via HTTP and exposes the results.</p>

    <section class="phpdocumentor-description"><p>\Varilink\SiteCrawler uses Symfony components to crawl a website via HTTP and return the results of the crawl in a form that is suited to inclusion within PHPUnit tests. I have found it useful for regression testing following PHP upgrade and associated application changes. I run it against old and new versions of the affected website and compare the results in PHPUnit tests.</p>
<p>To use the SiteCrawler you provide it with the URL of the website and one or more &quot;seeds&quot; - see <a href="../Varilink-SiteCrawler-Seed.html">\Varilink\SiteCrawler\Seed</a> but in brief here, the seeds define the sections of the site to be crawled and fine tune the crawl behaviour.</p>
</section>








<h3 id="toc">
    Table of Contents
    <a href="#toc" class="headerlink"><i class="fas fa-link"></i></a>
</h3>

<dl class="phpdocumentor-table-of-contents">
                <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Varilink-SiteCrawler.html#property_base">$base</a>
    <span>
                &nbsp;: string            </span>
</dt>
<dd>The base URL of the site that is being crawled, e.g. http://www.example.com.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Varilink-SiteCrawler.html#property_browser">$browser</a>
    <span>
                &nbsp;: <abbr title="\Symfony\Component\BrowserKit\HttpBrowser">HttpBrowser</abbr>            </span>
</dt>
<dd>The \Symfony\Component\BrowserKit\HttpBrowser instance being used by the \Varilink\SiteCrawler instance.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Varilink-SiteCrawler.html#property_link">$link</a>
    <span>
                &nbsp;: mixed            </span>
</dt>
<dd>The &quot;link&quot; that is currently being processed by an instance of
Varilink\SiteCrawler. The term link is used here to refer instances of
&lt;a&gt;, &lt;link&gt; or &lt;script&gt; tags, all of which can reference content that is
external to the page that the instance of Varilink\SiteCrawler is
processing. This variable contains the absolute URI assocaited with
the href attribute of &lt;a&gt; or &lt;link&gt; tags or the src attribute of &lt;link&gt;
tags. Where those atributes contain URIs that aren&#039;t absolute, they will
be converted to absolute URIs using the
Symfony\Component\DomCrawler\UriResolver helper class to resolve them
against the base URI of the page containing the link.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -property -public">
    <a href="classes/Varilink-SiteCrawler.html#property_seeds">$seeds</a>
    <span>
                &nbsp;: mixed            </span>
</dt>
<dd>An array of seed paths for the crawl, e.g. /, /admin, /members</dd>

                <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Varilink-SiteCrawler.html#method___construct">__construct()</a>
    <span>
                        &nbsp;: <a href="classes/Varilink-SiteCrawler.html"><abbr title="\Varilink\SiteCrawler">SiteCrawler</abbr></a>    </span>
</dt>
<dd>Constructor for the \Varilink\SiteCrawler class.</dd>

            <dt class="phpdocumentor-table-of-contents__entry -method -public">
    <a href="classes/Varilink-SiteCrawler.html#method_crawl">crawl()</a>
    <span>
                        &nbsp;: void    </span>
</dt>
<dd>Crawls the website</dd>

        </dl>



        

        
    <section class="phpdocumentor-properties">
        <h3 class="phpdocumentor-elements__header" id="properties">
            Properties
            <a href="classes/Varilink-SiteCrawler.html#properties" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_base">
        $base
        <a href="classes/Varilink-SiteCrawler.html#property_base" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">27</span>
</aside>

        <p class="phpdocumentor-summary">The base URL of the site that is being crawled, e.g. http://www.example.com.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">string</span>
    <span class="phpdocumentor-signature__name">$base</span>
    </code>

    
    
    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_browser">
        $browser
        <a href="classes/Varilink-SiteCrawler.html#property_browser" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">36</span>
</aside>

        <p class="phpdocumentor-summary">The \Symfony\Component\BrowserKit\HttpBrowser instance being used by the \Varilink\SiteCrawler instance.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type"><abbr title="\Symfony\Component\BrowserKit\HttpBrowser">HttpBrowser</abbr></span>
    <span class="phpdocumentor-signature__name">$browser</span>
    </code>

        <section class="phpdocumentor-description"><p>\Varilink\SiteCrawler uses an instance of \Symfony\Component\BrowserKit\HttpBrowser as a client to crawl a site with - see <a href="https://symfony.com/doc/current/components/browser_kit.html#making-external-http-requests">Making Externap HTTP Requests</a> in the documentation of <a href="https://symfony.com/doc/current/components/browser_kit.html">The BrowserKit</a> Component provided by Symfony.</p>
</section>

    
    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_link">
        $link
        <a href="classes/Varilink-SiteCrawler.html#property_link" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">98</span>
</aside>

        <p class="phpdocumentor-summary">The &quot;link&quot; that is currently being processed by an instance of
Varilink\SiteCrawler. The term link is used here to refer instances of
&lt;a&gt;, &lt;link&gt; or &lt;script&gt; tags, all of which can reference content that is
external to the page that the instance of Varilink\SiteCrawler is
processing. This variable contains the absolute URI assocaited with
the href attribute of &lt;a&gt; or &lt;link&gt; tags or the src attribute of &lt;link&gt;
tags. Where those atributes contain URIs that aren&#039;t absolute, they will
be converted to absolute URIs using the
Symfony\Component\DomCrawler\UriResolver helper class to resolve them
against the base URI of the page containing the link.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">$link</span>
    </code>

    
        <section class="phpdocumentor-description"></section>

    

</article>
                    <article
        class="
            phpdocumentor-element
            -property
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="property_seeds">
        $seeds
        <a href="classes/Varilink-SiteCrawler.html#property_seeds" class="headerlink"><i class="fas fa-link"></i></a>
        <span class="phpdocumentor-element__modifiers">
                                </span>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">84</span>
</aside>

        <p class="phpdocumentor-summary">An array of seed paths for the crawl, e.g. /, /admin, /members</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
        <span class="phpdocumentor-signature__type">mixed</span>
    <span class="phpdocumentor-signature__name">$seeds</span>
     = <span class="phpdocumentor-signature__default-value">[]</span></code>

        <section class="phpdocumentor-description"><p>The crawler object will conduct the crawl from one or more seed paths. Each
seed path must correspond to a HTML page within the site. The crawler will
retrieve that page and test every link within it. Where links are internal
to the site, it will retrieve the pages associated with those links and do
the same to those pages and it will keep going until it runs out of links
it has not tested and pages it has not parsed. Thus the seeds are the
&quot;home&quot; locations for each independent area within the site that is to be
crawled.</p>
<p>Each item in the array must be an associative array with a key of &quot;path&quot;
providing the path within the site for the seed, e.g. &quot;/&quot;, &quot;/admin&quot;,
&quot;/members&quot; etc.</p>
<p>If authentication is required in order to access the area within the site
associated with the seed, then the necessary credentials are provided with
the seed. This can be either for basic authentication or for form based
authentiation.</p>
<p>To provide basic authentication credetials, provide the key 'auth_basic'
within the seed providing an array of user credentials as follows:
$seeds = [
'path' =&gt; '/seed-path',
'auth_basic' =&gt; [ 'username', 'password' ]
];</p>
<p>To provide form based authentication credentials, and to define how the
form should be submitted, provide the key 'auth_login' within the seed
$seeds = [
'path' =&gt; '/seed-path',
'auth_login' =&gt; [
'/login-path', 'Log in', [
'username' =&gt; 'username',
'password' =&gt; 'password',
'other-parm' =&gt; 'other-parm'
]
]
];</p>
<p>The string to find the logon form ('Log in') and the array of form
parameters and values should be as required by the Symfony browser kit,
see:</p>
</section>

        <section class="phpdocumentor-description"></section>

    
    <h5 class="phpdocumentor-tag-list__heading" id="tags">
        Tags
        <a href="#tags" class="headerlink"><i class="fas fa-link"></i></a>
    </h5>
    <dl class="phpdocumentor-tag-list">
                                    <dt class="phpdocumentor-tag-list__entry">
                    <span class="phpdocumentor-tag__name">link</span>
                </dt>
                <dd class="phpdocumentor-tag-list__definition">
                                                                                                        <a class="phpdocumentor-tag-link" href="https://symfony.com/doc/current/components/browser_kit.html#submitting-forms"> <p>Symfony Browser Kit - Submitting Forms</p>
 </a>
                    
                                    </dd>
                        </dl>

</article>
            </section>

            <section class="phpdocumentor-methods">
        <h3 class="phpdocumentor-elements__header" id="methods">
            Methods
            <a href="classes/Varilink-SiteCrawler.html#methods" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method___construct">
        __construct()
        <a href="classes/Varilink-SiteCrawler.html#method___construct" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">107</span>
</aside>

        <p class="phpdocumentor-summary">Constructor for the \Varilink\SiteCrawler class.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">__construct</span><span>(</span><span class="phpdocumentor-signature__argument"><span class="phpdocumentor-signature__argument__return-type">string&nbsp;</span><span class="phpdocumentor-signature__argument__name">$base</span></span><span class="phpdocumentor-signature__argument"><span>, </span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, <a href="classes/Varilink-SiteCrawler-Seed.html"><abbr title="\Varilink\SiteCrawler\Seed">Seed</abbr></a>&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$seeds</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type"><a href="classes/Varilink-SiteCrawler.html"><abbr title="\Varilink\SiteCrawler">SiteCrawler</abbr></a></span></code>

    
        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$base</span>
                : <span class="phpdocumentor-signature__argument__return-type">string</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>The base URL of the site to be crawled, e.g. http://www.example.com.</p>
</section>

            </dd>
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$seeds</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, <a href="classes/Varilink-SiteCrawler-Seed.html"><abbr title="\Varilink\SiteCrawler\Seed">Seed</abbr></a>&gt;</span>
                            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>One or more instances of \Varilink\SiteCrawler\Seed that define the site sections for the crawl.</p>
</section>

            </dd>
            </dl>

    

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type"><a href="classes/Varilink-SiteCrawler.html"><abbr title="\Varilink\SiteCrawler">SiteCrawler</abbr></a></span>
            &mdash;
            <section class="phpdocumentor-description"><p>An instance of the \Varilink\SiteCrawler class.</p>
</section>

    
</article>
                    <article
        class="phpdocumentor-element
            -method
            -public
                                                        "
>
    <h4 class="phpdocumentor-element__name" id="method_crawl">
        crawl()
        <a href="classes/Varilink-SiteCrawler.html#method_crawl" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="SiteCrawler.php"><a href="files/sitecrawler.html"><abbr title="SiteCrawler.php">SiteCrawler.php</abbr></a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">122</span>
</aside>

        <p class="phpdocumentor-summary">Crawls the website</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility">public</span>
                <span class="phpdocumentor-signature__name">crawl</span><span>(</span><span class="phpdocumentor-signature__argument"><span>[</span><span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;&nbsp;</span><span class="phpdocumentor-signature__argument__name">$config</span><span> = </span><span class="phpdocumentor-signature__argument__default-value">[]</span><span> ]</span></span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">void</span></code>

    
        <h5 class="phpdocumentor-argument-list__heading">Parameters</h5>
    <dl class="phpdocumentor-argument-list">
                    <dt class="phpdocumentor-argument-list__entry">
                <span class="phpdocumentor-signature__argument__name">$config</span>
                : <span class="phpdocumentor-signature__argument__return-type">array&lt;string|int, mixed&gt;</span>
                 = <span class="phpdocumentor-signature__argument__default-value">[]</span>            </dt>
            <dd class="phpdocumentor-argument-list__definition">
                    <section class="phpdocumentor-description"><p>Optional associative array giving configuration settings for the crawl.</p>
<p>If the $config associative array is provided, it must contain one or more values as follows for these keys:</p>
<ul>
<li>'ignore' =&gt; an anonymous function provided as an instance of \Closure</li>
<li>'limit' =&gt; an integer limit on the number of pages to be parsed by the SiteCrawler for a single Seed</li>
</ul>
</section>

            </dd>
            </dl>

    

        <h5 class="phpdocumentor-return-value__heading">Return values</h5>
    <span class="phpdocumentor-signature__response_type">void</span>
            &mdash;
        
    
</article>
            </section>

    </article>
                <section data-search-results class="phpdocumentor-search-results phpdocumentor-search-results--hidden">
    <section class="phpdocumentor-search-results__dialog">
        <header class="phpdocumentor-search-results__header">
            <h2 class="phpdocumentor-search-results__title">Search results</h2>
            <button class="phpdocumentor-search-results__close"><i class="fas fa-times"></i></button>
        </header>
        <section class="phpdocumentor-search-results__body">
            <ul class="phpdocumentor-search-results__entries"></ul>
        </section>
    </section>
</section>
            </div>
        </div>
        <a href="classes/Varilink-SiteCrawler.html#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <script>
        cssVars({});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
</body>
</html>
